<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caesar Cipher Tool</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Roboto+Mono:wght@400&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #eef2ff; /* Light indigo background */
        }
        .mono-font {
            font-family: 'Roboto Mono', monospace;
        }
        .card {
            box-shadow: 0 10px 25px -5px rgba(49, 46, 129, 0.1), 0 4px 10px -2px rgba(49, 46, 129, 0.05);
        }
        .range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            background: #4f46e5;
            cursor: pointer;
            border-radius: 50%;
            border: 2px solid #fff;
        }
        .range-slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: #4f46e5;
            cursor: pointer;
            border-radius: 50%;
            border: 2px solid #fff;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-xl bg-white rounded-xl card p-6 sm:p-8">
        <h1 class="text-3xl font-bold text-gray-800 mb-2 flex items-center justify-center">
            <span class="text-indigo-600 mr-2">üóùÔ∏è</span> Caesar Cipher
        </h1>
        <p class="text-sm text-gray-500 mb-6 text-center">Encrypt or decrypt text by shifting letters (A=1, B=2, etc.).</p>

        <!-- Key / Shift Control -->
        <div class="mb-6 p-4 bg-indigo-50 rounded-lg">
            <label for="shift-slider" class="block text-sm font-medium text-gray-700 mb-2 flex justify-between">
                Cipher Key (Shift): <span id="shift-value" class="font-bold text-indigo-600 text-xl">3</span>
            </label>
            <input type="range" id="shift-slider" min="1" max="25" value="3" class="w-full h-2 bg-indigo-200 rounded-lg appearance-none cursor-pointer range-slider">
        </div>

        <!-- Input Text Area -->
        <div class="mb-4">
            <label for="input-text" class="block text-sm font-medium text-gray-700 mb-2">Input Text</label>
            <textarea id="input-text" rows="4" placeholder="Type your secret message here..." 
                      class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 mono-font text-base"
                      oninput="processText()"></textarea>
        </div>

        <!-- Output Text Area -->
        <div>
            <label for="output-text" class="block text-sm font-medium text-gray-700 mb-2 flex justify-between">
                Cipher Output
                <span id="mode-display" class="font-semibold text-sm text-indigo-500">Mode: Encrypt</span>
            </label>
            <textarea id="output-text" rows="4" readonly placeholder="Encrypted or Decrypted result will appear here..." 
                      class="w-full p-3 border border-gray-300 rounded-lg bg-gray-100 mono-font text-base"></textarea>
        </div>

        <!-- Mode Toggle Button -->
        <div class="mt-6">
            <button id="toggle-button" onclick="toggleMode()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg transition duration-150 ease-in-out transform hover:scale-[1.005]">
                Switch to Decrypt Mode
            </button>
        </div>
    </div>

    <script>
        const inputTextarea = document.getElementById('input-text');
        const outputTextarea = document.getElementById('output-text');
        const shiftSlider = document.getElementById('shift-slider');
        const shiftValueDisplay = document.getElementById('shift-value');
        const modeDisplay = document.getElementById('mode-display');
        const toggleButton = document.getElementById('toggle-button');

        // State to track if we are encrypting (true) or decrypting (false)
        let isEncryptMode = true;

        // Event Listeners
        shiftSlider.addEventListener('input', () => {
            shiftValueDisplay.textContent = shiftSlider.value;
            processText();
        });

        inputTextarea.addEventListener('input', processText);

        /**
         * The core function that handles both encryption and decryption based on the mode.
         * @param {string} text - The input string to process.
         * @param {number} key - The shift amount (1 to 25).
         * @param {boolean} encrypt - True for encryption, False for decryption.
         * @returns {string} The processed text.
         */
        function caesarCipher(text, key, encrypt) {
            // Adjust key for decryption mode
            let shift = parseInt(key, 10);
            if (!encrypt) {
                shift = (26 - shift) % 26; // Decrypting is the same as encrypting with a negative key
            }

            let result = '';

            for (let i = 0; i < text.length; i++) {
                let char = text[i];
                let charCode = char.charCodeAt(0);

                if (charCode >= 65 && charCode <= 90) { // Uppercase letters (A-Z)
                    // (charCode - 65) converts A=0, B=1, etc.
                    // Add shift, take modulus 26, then add 65 back for the new char code.
                    char = String.fromCharCode(((charCode - 65 + shift) % 26) + 65);
                } else if (charCode >= 97 && charCode <= 122) { // Lowercase letters (a-z)
                    // (charCode - 97) converts a=0, b=1, etc.
                    char = String.fromCharCode(((charCode - 97 + shift) % 26) + 97);
                }
                // Non-alphabetic characters (numbers, spaces, symbols) are left unchanged
                result += char;
            }

            return result;
        }

        /**
         * Reads input, runs the cipher, and updates the output.
         */
        function processText() {
            const text = inputTextarea.value;
            const key = shiftSlider.value;
            
            const result = caesarCipher(text, key, isEncryptMode);
            
            outputTextarea.value = result;
        }

        /**
         * Toggles between Encrypt and Decrypt modes.
         */
        function toggleMode() {
            isEncryptMode = !isEncryptMode;
            
            if (isEncryptMode) {
                modeDisplay.textContent = 'Mode: Encrypt';
                toggleButton.textContent = 'Switch to Decrypt Mode';
                inputTextarea.placeholder = 'Type your secret message here...';
            } else {
                modeDisplay.textContent = 'Mode: Decrypt';
                toggleButton.textContent = 'Switch to Encrypt Mode';
                inputTextarea.placeholder = 'Paste your cipher text here...';
            }
            
            // Re-process the text immediately after switching mode
            processText();
        }

        // Initial setup
        document.addEventListener('DOMContentLoaded', () => {
            // Ensure initial calculation runs
            processText(); 
        });

    </script>
</body>
</html>
